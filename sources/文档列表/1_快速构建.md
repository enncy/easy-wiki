---ewiki-config---
create_at=2024/7/13 15:26:50
update_at=2024/7/16 21:21:42
sidebar=快速构建
---ewiki-config---



 

# 快速构建

> 本文将介绍如何通过内置插件快速构建 WIKI 文档，并自带侧边栏，顶部栏，丰富样式等功能
> 项目环境：Node.js ，没有安装的请先安装 [Node.js](https://nodejs.org/zh-cn/)

```sh
# 1.安装额外 Markdown-It 插件 （用于ewiki内置插件）
npm i markdown-it-container
# 2.安装 easy-wiki
# 此命令会先使用 npm 安装 ewiki ，然后运行 npx ewiki 命令构建项目
# 如果项目为初始化，则会先运行 npx ewiki inti 初始化项目命令
npx ewiki
```

运行命令后会生成多个文件，详情请在首页的文档查看文件解析

## 快速配置

初始化后修改配置文件 `ewiki.config.json` 中的下列字段 :

```json
{
  // 加载 node_modules/ewiki/plugins 内置插件
  "plugins": [
    "./plugins/**/*.js",
    // 这里如果只写npm项目名的话，会自动加载node_modules/ewiki/plugins下的插件，想要加其他插件同理
    "ewiki"
  ],
  // 修改为内置插件的模版文件，如需修改 title 以及其他内容，可以复制粘贴这个文件到自己的项目下使用
  "html_template": "./node_modules/ewiki/plugins/extra-widget/template.html"
}
```

> 如果不想使用内置插件，可以从官方代码仓库中下载指定的插件使用，或者直接复制粘贴到本地项目中

## 编写文档

开启监听模式，并编写你的文档

```sh
npx ewiki watch
``` 

在 `sources` 文件夹（或指定文档文件夹）中编写 Markdown 文件，（如果你不想写可以直接编写 `sources/index.md` 文档，这样就会只有一个首页文件）

每一个文件夹代表一级目录，可以递归嵌套

使用内置插件后，可以在 Markdown 文件上方的 `元数据` 中使用 `sidebar` 语法引入侧边栏，例如：

```
---ewiki-config---
...
sidebar=快速构建
...
---ewiki-config---
```

> 更多 `元数据` 请在侧边栏的 `内置插件` 查看

如果不写 `sidebar` 参数，则不会出现在侧边栏，可以手动使用路径对其文件做引用

## 构建

```sh
npx ewiki
```

执行命令打开生成后的 `dist/index.html` 文件即可查看生成的文档，（此时侧边栏的链接无法访问，因为没有部署到服务器，开启 ewiki watch 或者上传到服务器后使用IP域名才可访问，或者直接吧 server.base_url 改成你本地的路径）

## 构建结果示例

![https://enncy.github.io/easy-wiki/assets/demo.png](https://enncy.github.io/easy-wiki/assets/demo.png)

## 部署到 Github

::: warn **注意**
如果你的 github 文档不是根路径，而是带有二级路径，例如 `https://xxx.github.io/xxxxx` ，则需要在 配置文件 `ewiki.config.json` 中对字段 `server`.`base_url` ，修改为 `/xxxxx` ，否测侧边栏的链接会出现问题。
:::

```sh
# 初始化 git 仓库
git init
# 添加远程仓库
git remote add origin <你的仓库地址>
# 保存当前工作区
git add .
git commit -m 'init'
# 创建 gh-pages 分支
git checkout -b gh-pages
```

修改 package.json 文件 scripts 字段

```json
{
  "scripts": {
    "deploy": "npx ewiki && git add . && git commit -m 'deploy' && git push origin gh-pages"
  }
}
```

```sh
# 执行部署命令
npm run deploy
```

## 部署到私人服务器

将生成的 `dist` 文件夹上传到服务器指定目录，并使用 `nginx` 或者 `apache` 配置对应的路径即可访问 